<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Search | LNKW Steel Works</title>
    <link rel="stylesheet" href="style.css">
    <script>
document.addEventListener("DOMContentLoaded", function () {
    const params = new URLSearchParams(window.location.search);
    const query = params.get("query");

    if (query) {
        document.title = "Search results for: " + query + " | LNKW Steel Works";
    }
});
</script>

</head>

<body>

<!-- ================= HEADER (same as LNKW.html) ================= -->
<header>
    <div class="header">
        <h1>
            <a href="index.html">
                <img src="logo.jpg" class="logo"></a>LNKW Steel Works
            
        </h1>
            <!-- Search Bar -->
            <div class="search">
                <input id="searchInput" type="text" placeholder="Search in LNKW Steel Works">
                <button onclick="doSearch()"><span>&#128269;</span></button>
            </div>

            <button class="cart-btn" onclick="window.location.href='cart.html'">&#128722;
                <span id="cart-count" class="cart-count">0</span>
            </button>
    </div>
</header>

<!-- Recent Search Dropdown -->
<div id="recentBox" class="recent-box">
    <p class="recent-title">Recent Searches</p>
    <ul id="recentList"></ul>
    <button class="clear-all-btn" onclick="clearAllHistory()">Clear All</button>
</div>

<!-- ================= SEARCH RESULTS ================= -->
<div class="categories">
    <h2 id="resultTitle">Search Results</h2>
</div>

<div id="resultContainer" class="product-section"></div>

<script>
// ========================= PRODUCT DATA =========================
const products = [
      { title: "Butterfly design chairs with small table (CHAIR SET)", price: "80000", img: "products/img1.jpg", page: "product1.html" },
    { title: "Lion's Leg design (CHAIR SET)", price: "70000", img: "products/img2.jpg", page: "product2.html" },
    { title: "Butterfly design chairs with big table (CHAIR SET)", price: "85000", img: "products/img3.jpg", page: "product3.html" },
    { title: "line design chairs with big square table (CHAIR SET)", price: "90000", img: "products/img4.jpg", page: "product4.html" },
    { title: "Grape design (CHAIR SET)", price: "60000", img: "products/img5.jpg", page: "product5.html" },
    { title: "Circle design with glvanized box bar (SWING)", price: "65000", img: "products/img6.jpg", page: "product6.html" },
    { title: "Line alumminium design (SWING)", price: "65000", img: "products/img7.jpg", page: "product7.html" },
    { title: "Circle design with Woodden strip (SWING)", price: "65000", img: "products/img8.jpg", page: "product8.html" },
    { title: "Aluminium and Woodden strip design (SWING)", price: "65000", img: "products/img9.jpg", page: "product9.html" },
    { title: "Polycarbonate corrugated sheet design (SWING)", price: "80000", img: "products/img10.jpg", page: "product10.html" },
    { title: "Polycarbonate clear sheet design (SWING)", price: "90000", img: "products/img11.jpg", page: "product11.html" },
    { title: "King Chairs design with normal table (CHAIR SET)", price: "80000", img: "products/img12.jpg", page: "product12.html" },
    { title: "King Chairs design with small table (CHAIR SET)", price: "75000", img: "products/img13.jpg", page: "product13.html" },
    { title: "King big Chairs design with big table (CHAIR SET)", price: "110000", img: "products/img14.jpg", page: "product14.html" },
    { title: "Aluminium long chair with Design legs (BENCH)", price: "45000", img: "products/img15.jpg", page: "product15.html" },
    { title: "Aluminium long chair with normal legs (BENCH)", price: "40000", img: "products/img16.jpg", page: "product16.html" },
    { title: "Woodden Strip Long Chair with alumminium design legs (BENCH)", price: "40000", img: "products/img17.jpg", page: "product17.html" },
    { title: "Wooden Strip Design Aluminium table and Chairs (CHAIR SET)", price: "120000", img: "products/img18.jpg", page: "product18.html" },
    { title: "Aluminium wevel design long chairs (BENCH)", price: "40000", img: "products/img19.jpg", page: "product19.html" },
    { title: "Aluminium fully design long chairs (BENCH)", price: "40000", img: "products/img20.jpg", page: "product20.html" }

];

// ========================= SEARCH FUNCTION =========================
function doSearch() {
    let keyword = document.getElementById("searchInput").value.trim().toLowerCase();

    if (keyword === "") {
        alert("Please type something to search.");
        return;
    }

    saveHistory(keyword);

    window.location.href = "search.html?query=" + encodeURIComponent(keyword);
}

// ENTER key support
document.getElementById("searchInput").addEventListener("keypress", e => {
    if (e.key === "Enter") doSearch();
});

// ========================= SHOW RESULTS =========================
function loadResults() {
    const params = new URLSearchParams(window.location.search);
    const query = params.get("query");

    document.getElementById("searchInput").value = query;

    let resultDiv = document.getElementById("resultContainer");
    let title = document.getElementById("resultTitle");

    let match = products.filter(p => p.title.toLowerCase().includes(query.toLowerCase()));

    if (match.length === 0) {
        title.innerHTML = "‚ùå No Results Found";
        resultDiv.innerHTML = "<p style='color:red; font-size:20px;'>Try another keyword.</p>";
        return;
    }

    title.innerHTML = "Showing Results for: " + query;

    resultDiv.innerHTML = match.map(p => `
        <a href="${p.page}" class="product-card">
            <img src="${p.img}">
            <p class="title">${p.title}</p>
            <p class="price">Rs. ${p.price}</p>
        </a>
    `).join("");
}

loadResults();

// ========================= HISTORY FUNCTIONS =========================
function saveHistory(keyword) {
    let history = JSON.parse(localStorage.getItem("searchHistory")) || [];

    history.unshift(keyword);
    history = [...new Set(history)]; // remove duplicates
    history = history.slice(0, 10);

    localStorage.setItem("searchHistory", JSON.stringify(history));
}

function showHistory() {
    let box = document.getElementById("recentBox");
    let list = document.getElementById("recentList");

    let history = JSON.parse(localStorage.getItem("searchHistory")) || [];

    if (history.length === 0) {
        box.style.display = "none";
        return;
    }

    box.style.display = "block";

    list.innerHTML = history.map(item => `
        <li onclick="selectHistory('${item}')">
            <span>${item}</span>
            <span class="clear-single" onclick="removeItem(event, '${item}')">‚úñ</span>
        </li>
    `).join("");
}

function selectHistory(txt) {
    document.getElementById("searchInput").value = txt;
    doSearch();
}

function removeItem(event, item) {
    event.stopPropagation();

    let history = JSON.parse(localStorage.getItem("searchHistory")) || [];
    history = history.filter(h => h !== item);

    localStorage.setItem("searchHistory", JSON.stringify(history));
    showHistory();
}

function clearAllHistory() {
    localStorage.removeItem("searchHistory");
    showHistory();
}

// Show history when clicking search bar
document.getElementById("searchInput").addEventListener("focus", showHistory);
</script>
<footer class="footer">
    <div class="footer-container">

        <!-- About Section -->
        <div class="footer-box">
            <h3>About Us</h3>
            <p>Welcome to LNKW STEEL WORKS, your trusted store for high-quality garden chairs, outdoor swings, and relaxing furniture.
We offer durable, stylish, and comfortable products designed to make your garden a beautiful and peaceful place.
Our goal is to provide great quality at the best price with friendly service.</p>
        </div>

        <!-- Quick Links -->
        <div class="footer-box">
            <h3>Quick Links</h3>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="categories.html">Categories</a></li>
                <li><a href="index.html#product-section">Products</a></li>
                <li><a href="#Contact">Contact Us</a></li>
            </ul>
        </div>

        <!-- Contact Section -->
        <div class="footer-box" id="Contact">
            <h3>Contact</h3>
            <p>üìç Address: 352/1B, Horana-Colombo Road, Kahathuduwa, Polgasowita. </p>
            <p>üìû Phone: 076 222 6839 / 077 189 6839</p>
            <p>üìß Email: lnkwsteel@gmail.com</p>
        </div>

        <!-- Social Icons -->
        <div class="footer-box">
            <h3>Follow Us</h3>
            <div class="social-links">
                <a href="https://www.facebook.com/share/1DEyfDn3kk/">Facebook</a>
                <a href="https://www.instagram.com/lnkw.steel.works/">Instagram</a>
                <a href="https://www.youtube.com/@lnkwsteel">YouTube</a>
            </div>
        </div>
    </div>
<div class="whatsapp-footer-btn">
    <a href="https://wa.me/94762226839?text=Hello%20I%20need%20more%20details" target="_blank">
        <img src="whatsapp.png" alt="WhatsApp">
        <span>Chat on WhatsApp</span>
    </a>
</div>

<div class="footer-bottom">
        <p>¬© 2025 Your LNKW Steel Works | All Rights Reserved.</p>
    </div>

</footer>
<script src="script.js"></script>
<script>
    updateCartCount();
</script>

</body>
</html>
